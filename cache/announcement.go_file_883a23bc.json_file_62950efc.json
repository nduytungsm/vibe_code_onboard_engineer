{
  "content_hash": "1476fd068b01b499abc60c7d351eaeb5",
  "timestamp": "2025-09-26T08:53:31.869734+07:00",
  "result": {
    "language": "Go",
    "purpose": "This file defines an announcement handler for managing announcements and user preferences in a web application.",
    "key_types": [
      "AnnouncementHandler",
      "announcementHandler",
      "md.ScheduleNewAnnouncementRequest",
      "md.ScheduleNewSpecialOfferRequest",
      "md.GetAnnouncementByID",
      "md.GetAnnouncementsListRequest",
      "md.InternalGetWalletPreferencesRequest",
      "md.InternalGetWalletPreferenceResponse",
      "md.PublicAnnouncementListItem",
      "md.ListResponse",
      "md.GetCountNewAnnouncementsRequest",
      "md.GetCountNewAnnouncementsResponse"
    ],
    "functions": [
      "InternalScheduleNewAnnouncement",
      "InternalScheduleNewSpecialOffer",
      "InternalGetAnnouncementByID",
      "InternalGetAnnouncementsList",
      "InternalMarkPublished",
      "InternalManualCleanPublishedJobs",
      "InternalDeleteAnnouncement",
      "InternalGetWalletPreferences",
      "PublicGetAnnouncementByID",
      "PublicGetAnnouncementsList",
      "PublicCountNewAnnouncements",
      "PrivateGetPreferences",
      "PrivateUpdatePreferences",
      "PrivateGetDevicePreference",
      "PrivateUpdateDevicePreference",
      "NewAnnouncementHandler"
    ],
    "imports": [
      "errors",
      "net/http",
      "slices",
      "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
      "github.com/axieinfinity/ecosystem-go-common/errors",
      "github.com/labstack/echo/v4",
      "gorm.io/gorm",
      "github.com/axieinfinity/ronin-wallet-manager/models",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/announcement",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/helper",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/preference"
    ],
    "side_effects": [
      "Interacts with external services for scheduling and managing announcements.",
      "Modifies user preferences in the database."
    ],
    "risks": [
      "Potential for SQL injection if input is not properly sanitized.",
      "Error handling may expose sensitive information."
    ],
    "complexity": "medium"
  }
}