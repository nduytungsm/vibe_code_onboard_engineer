{
  "content_hash": "0cec987f008121eb76e705098f5fb9b1",
  "timestamp": "2025-09-24T17:40:14.561267+07:00",
  "result": {
    "language": "Go",
    "purpose": "This file defines an announcement handler that manages announcements and user preferences through various API endpoints.",
    "key_types": [
      "AnnouncementHandler",
      "announcementHandler",
      "md.ScheduleNewAnnouncementRequest",
      "md.ScheduleNewSpecialOfferRequest",
      "md.GetAnnouncementByID",
      "md.GetAnnouncementsListRequest",
      "md.InternalGetWalletPreferencesRequest",
      "md.InternalGetWalletPreferenceResponse",
      "md.PublicAnnouncementListItem",
      "md.ListResponse",
      "md.GetCountNewAnnouncementsRequest",
      "md.GetCountNewAnnouncementsResponse"
    ],
    "functions": [
      "InternalScheduleNewAnnouncement",
      "InternalScheduleNewSpecialOffer",
      "InternalGetAnnouncementByID",
      "InternalGetAnnouncementsList",
      "InternalMarkPublished",
      "InternalManualCleanPublishedJobs",
      "InternalDeleteAnnouncement",
      "InternalGetWalletPreferences",
      "PublicGetAnnouncementByID",
      "PublicGetAnnouncementsList",
      "PublicCountNewAnnouncements",
      "PrivateGetPreferences",
      "PrivateUpdatePreferences",
      "PrivateGetDevicePreference",
      "PrivateUpdateDevicePreference",
      "NewAnnouncementHandler"
    ],
    "imports": [
      "errors",
      "net/http",
      "slices",
      "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
      "github.com/axieinfinity/ecosystem-go-common/errors",
      "github.com/labstack/echo/v4",
      "gorm.io/gorm",
      "github.com/axieinfinity/ronin-wallet-manager/models",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/announcement",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/helper",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/preference"
    ],
    "side_effects": [
      "Interacts with external services to schedule, retrieve, and manage announcements and preferences.",
      "Modifies the state of the system by creating, updating, or deleting announcements and preferences."
    ],
    "risks": [
      "Potential exposure of sensitive user data if proper authentication and authorization are not enforced.",
      "Possible denial of service if the service is overwhelmed with requests."
    ],
    "complexity": "medium"
  }
}