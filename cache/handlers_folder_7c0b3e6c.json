{
  "content_hash": "7e2aa4a8b5a0d9fca4e24b428fb35138",
  "timestamp": "2025-09-26T11:09:13.770239+07:00",
  "result": {
    "path": "handlers",
    "purpose": "Responsible for handling various operations related to accounts, announcements, devices, external authentication, and other web service functionalities.",
    "languages": {
      "Go": 15
    },
    "key_modules": [
      "account.go",
      "announcement.go",
      "binance.go",
      "blacklist.go",
      "common.go",
      "dapp.go",
      "default.go",
      "device.go",
      "external_auth.go",
      "locationhandler.go",
      "moonpay.go",
      "network.go",
      "releasecandidate.go",
      "trusted_domain.go"
    ],
    "dependencies": [
      "github.com/labstack/echo/v4",
      "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
      "github.com/axieinfinity/ronin-wallet-manager/models",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/*",
      "gorm.io/gorm",
      "github.com/redis/go-redis/v9",
      "github.com/rs/zerolog/log"
    ],
    "architecture": "The folder follows a modular architecture pattern, where each file corresponds to a specific handler for different functionalities, promoting separation of concerns and maintainability.",
    "file_summaries": {
      "handlers/account.go": {
        "language": "Go",
        "purpose": "Handles account-related operations such as getting account info, linking accounts, refreshing tokens, and revoking tokens.",
        "key_types": [
          "AccountHandler",
          "accountHandler",
          "sso.Config",
          "sso.Client",
          "httpclient.Athena",
          "md.GetSMUserInfoResponse",
          "md.LinkAccountRequest",
          "md.OkResponse"
        ],
        "functions": [
          "GetAccountInfo",
          "LinkAccount",
          "RefreshToken",
          "RevokeToken",
          "NewAccountHandler"
        ],
        "imports": [
          "net/http",
          "strconv",
          "strings",
          "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
          "github.com/axieinfinity/ecosystem-go-common/sso",
          "github.com/labstack/echo/v4",
          "github.com/rs/zerolog/log",
          "github.com/axieinfinity/ronin-wallet-manager/httpclient",
          "github.com/axieinfinity/ronin-wallet-manager/models"
        ],
        "side_effects": [
          "Logs debug information about token exchange and refresh operations.",
          "Modifies the context response with JSON data."
        ],
        "risks": [
          "Potential exposure of sensitive information if error handling is not properly implemented.",
          "Dependency on external services for authentication may introduce vulnerabilities."
        ],
        "complexity": "medium"
      },
      "handlers/announcement.go": {
        "language": "Go",
        "purpose": "This file defines an announcement handler that manages announcements and user preferences through various HTTP endpoints.",
        "key_types": [
          "AnnouncementHandler",
          "announcementHandler",
          "md.ScheduleNewAnnouncementRequest",
          "md.ScheduleNewSpecialOfferRequest",
          "md.GetAnnouncementByID",
          "md.GetAnnouncementsListRequest",
          "md.InternalGetWalletPreferencesRequest",
          "md.InternalGetWalletPreferenceResponse",
          "md.PublicAnnouncementListItem",
          "md.ListResponse",
          "md.GetCountNewAnnouncementsRequest",
          "md.GetCountNewAnnouncementsResponse"
        ],
        "functions": [
          "InternalScheduleNewAnnouncement",
          "InternalScheduleNewSpecialOffer",
          "InternalGetAnnouncementByID",
          "InternalGetAnnouncementsList",
          "InternalMarkPublished",
          "InternalManualCleanPublishedJobs",
          "InternalDeleteAnnouncement",
          "InternalGetWalletPreferences",
          "PublicGetAnnouncementByID",
          "PublicGetAnnouncementsList",
          "PublicCountNewAnnouncements",
          "PrivateGetPreferences",
          "PrivateUpdatePreferences",
          "PrivateGetDevicePreference",
          "PrivateUpdateDevicePreference",
          "NewAnnouncementHandler"
        ],
        "imports": [
          "errors",
          "net/http",
          "slices",
          "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
          "github.com/axieinfinity/ecosystem-go-common/errors",
          "github.com/labstack/echo/v4",
          "gorm.io/gorm",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/announcement",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/helper",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/preference"
        ],
        "side_effects": [
          "Interacts with external services to schedule, retrieve, and manage announcements and preferences."
        ],
        "risks": [
          "Potential exposure of sensitive user preferences if not properly secured.",
          "Error handling may expose internal error messages."
        ],
        "complexity": "medium"
      },
      "handlers/binance.go": {
        "language": "Go",
        "purpose": "This file defines a handler for signing requests using the Binance service.",
        "key_types": [
          "BinanceHandler",
          "binanceHandler",
          "binance.Service",
          "md.BinanceSignRequest",
          "md.BinanceSignResponse"
        ],
        "functions": [
          "Sign",
          "NewBinanceHandler"
        ],
        "imports": [
          "net/http",
          "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
          "github.com/labstack/echo/v4",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/binance"
        ],
        "complexity": "medium"
      },
      "handlers/blacklist.go": {
        "language": "Go",
        "purpose": "Handles requests related to blacklist sites and returns them in JSON format.",
        "key_types": [
          "BlacklistHandler",
          "blacklistHandler",
          "blacklist.Service",
          "md.ListResponse"
        ],
        "functions": [
          "NewBlacklistHandler",
          "GetBlacklistSites"
        ],
        "imports": [
          "net/http",
          "github.com/labstack/echo/v4",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/blacklist"
        ],
        "complexity": "medium"
      },
      "handlers/common.go": {
        "language": "Go",
        "purpose": "This file defines a common handler for managing configurations and code versions in a web application.",
        "key_types": [
          "CommonHandler",
          "commonHandler",
          "repositories.CommonRepo",
          "repositories.CodeVersionRepo",
          "redis.Client",
          "models.EnvironmentConfig",
          "models.Common",
          "models.UpdateCodeVersionRequest"
        ],
        "functions": [
          "GetCodePushVersion",
          "GetCommonConfig",
          "GetEncodedCommonConfig",
          "RefreshKnownContracts",
          "UpdateCommonConfig",
          "UpdateCodeVersion",
          "initCacheCodeVersion",
          "initCacheCommon",
          "fireCacheChangedEvent",
          "refreshCache",
          "ExternalAuthConfig",
          "NewCommonHandler"
        ],
        "imports": [
          "context",
          "encoding/json",
          "errors",
          "fmt",
          "net/http",
          "strings",
          "sync",
          "github.com/labstack/echo/v4",
          "github.com/redis/go-redis/v9",
          "github.com/rs/zerolog/log",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/blacklist",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/helper",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/xauth",
          "github.com/axieinfinity/ronin-wallet-manager/repositories"
        ],
        "side_effects": [
          "Modifies cache for common configurations and code versions",
          "Publishes events to Redis channels"
        ],
        "risks": [
          "Potential for race conditions due to concurrent access to shared resources",
          "Improper error handling may expose sensitive information"
        ],
        "complexity": "medium"
      },
      "handlers/dapp.go": {
        "language": "Go",
        "purpose": "This file defines a handler for managing decentralized application (DApp) operations, including saving, updating, retrieving, and deleting DApps and highlights.",
        "key_types": [
          "DAppHandler",
          "dAppHandler",
          "md.SaveQuickAccessDAppRequest",
          "md.QuickAccessDApp",
          "md.InternalQuickAccessDAppResponse",
          "md.Highlight",
          "md.InternalHighlightResponse"
        ],
        "functions": [
          "InternalSave",
          "InternalSaveBatch",
          "InternalUpdate",
          "InternalUpdateOrder",
          "InternalGetByID",
          "InternalDeleteByID",
          "InternalGetAll",
          "InternalSaveHighlight",
          "InternalSaveBatchHighlight",
          "InternalUpdateHighlight",
          "InternalGetHighlightByID",
          "InternalDeleteHighlightByID",
          "InternalGetAllHighlight",
          "InternalRefreshCacheHighlight",
          "PublicGetList",
          "PublicGetHighlight",
          "NewDAppHandler"
        ],
        "imports": [
          "errors",
          "net/http",
          "strings",
          "github.com/labstack/echo/v4",
          "gorm.io/gorm",
          "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
          "github.com/axieinfinity/ecosystem-go-common/errors",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/blacklist",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/dapp",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/helper"
        ],
        "side_effects": [
          "Modifies the state of DApps in the database",
          "Interacts with external services for blacklist checks"
        ],
        "risks": [
          "Potential exposure of sensitive data through improper error handling",
          "Inadequate input validation may lead to injection attacks"
        ],
        "complexity": "medium"
      },
      "handlers/default.go": {
        "language": "Go",
        "purpose": "This file defines a handler function to retrieve agent information from the context.",
        "key_types": [
          "echo.Context",
          "models.AgentInfo"
        ],
        "functions": [
          "getAgentInfo"
        ],
        "imports": [
          "github.com/labstack/echo/v4",
          "github.com/axieinfinity/ronin-wallet-manager/middleware",
          "github.com/axieinfinity/ronin-wallet-manager/models"
        ],
        "complexity": "low"
      },
      "handlers/device.go": {
        "language": "Go",
        "purpose": "This file defines a handler for device-related operations in a web application, including device reset, registration, push token updates, address synchronization, and wallet import.",
        "key_types": [
          "DeviceHandler",
          "deviceHandler",
          "md.GetDeviceByIDRequest",
          "md.PostDeviceRegistrationRequest",
          "md.PutDeviceAddressesReq",
          "md.PostImportWalletReq"
        ],
        "functions": [
          "ResetDeviceByID",
          "Registration",
          "UpdatePushToken",
          "SyncAddresses",
          "ImportWallet",
          "NewDeviceHandler"
        ],
        "imports": [
          "context",
          "encoding/json",
          "net/http",
          "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
          "github.com/axieinfinity/ecosystem-go-common/errors",
          "github.com/labstack/echo/v4",
          "github.com/rs/zerolog/log",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/device",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/preference"
        ],
        "side_effects": [
          "Logging information about device resets and errors"
        ],
        "risks": [
          "Potential exposure of sensitive data in logs",
          "Improper error handling could lead to information leakage"
        ],
        "complexity": "medium"
      },
      "handlers/external_auth.go": {
        "language": "Go",
        "purpose": "Handles external authentication processes, including exchanging auth codes and revoking tokens.",
        "key_types": [
          "ExternalAuthHandler",
          "externalAuthHandler",
          "xauth.Service"
        ],
        "functions": [
          "ExchangeAuthCode",
          "RevokeToken",
          "NewTwitterHandler"
        ],
        "imports": [
          "net/http",
          "github.com/labstack/echo/v4",
          "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/xauth"
        ],
        "side_effects": [
          "Sends HTTP responses based on authentication processes."
        ],
        "risks": [
          "Potential exposure of sensitive authentication data if not handled properly."
        ],
        "complexity": "medium"
      },
      "handlers/locationhandler.go": {
        "language": "Go",
        "purpose": "Handles location-related requests and responses for a web service.",
        "key_types": [
          "LocationHandler",
          "locationHandler",
          "models.GetLocationRequest"
        ],
        "functions": [
          "PublicGetLocation",
          "InternalGetLocation",
          "InternalDownloadDB",
          "lookupLocation",
          "NewLocationHandler"
        ],
        "imports": [
          "errors",
          "net/http",
          "github.com/labstack/echo/v4",
          "github.com/rs/zerolog/log",
          "gorm.io/gorm",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/location"
        ],
        "side_effects": [
          "Logs debug information when looking up location."
        ],
        "risks": [
          "Potential exposure of sensitive information through error messages."
        ],
        "complexity": "medium"
      },
      "handlers/moonpay.go": {
        "language": "Go",
        "purpose": "Handles Moonpay URL signing requests",
        "key_types": [
          "MoonpayHandler",
          "moonpayHandler",
          "models.MoonpaySigningRequest",
          "models.MoonpaySigningResponse"
        ],
        "functions": [
          "SignURL",
          "NewMoonpayHandler"
        ],
        "imports": [
          "net/http",
          "github.com/axieinfinity/ecosystem-go-common/errors",
          "github.com/labstack/echo/v4",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/moonpay"
        ],
        "risks": [
          "Potential for error handling issues if external service fails",
          "Possible exposure of sensitive data in error messages"
        ],
        "complexity": "medium"
      },
      "handlers/network.go": {
        "language": "Go",
        "purpose": "This file defines a network handler for managing network-related operations in a web application.",
        "key_types": [
          "NetworkHandler",
          "networkHandler",
          "models.Network",
          "models.DApp",
          "models.Contract"
        ],
        "functions": [
          "GetDApps",
          "GetNetworkConfig",
          "getDAppsPublic",
          "getContractsPublic",
          "GetContracts",
          "GetAllConfigs"
        ],
        "imports": [
          "context",
          "encoding/json",
          "fmt",
          "net/http",
          "slices",
          "sort",
          "sync",
          "github.com/axieinfinity/ecosystem-go-common/errors",
          "github.com/hashicorp/go-version",
          "github.com/labstack/echo/v4",
          "github.com/mitchellh/mapstructure",
          "github.com/redis/go-redis/v9",
          "github.com/rs/zerolog/log",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/helper",
          "github.com/axieinfinity/ronin-wallet-manager/repositories"
        ],
        "side_effects": [
          "Modifies cache for DApps and contracts based on user agent information."
        ],
        "complexity": "medium"
      },
      "handlers/releasecandidate.go": {
        "language": "Go",
        "purpose": "Handles release candidate features and configurations for a web service.",
        "key_types": [
          "ReleaseCandidateHandler",
          "releaseCandidateHandler",
          "models.CheckAllowFeatureRequest",
          "models.PostFeatureConfigRequest",
          "models.PostWhitelistFeaturesRequest",
          "models.PostSetConfigForDeviceRequest",
          "models.GetCountWhitelistDevices",
          "models.OkResponse"
        ],
        "functions": [
          "CheckAllowFeature",
          "SetFeatureConfig",
          "SetWhitelistFeatures",
          "SetConfigForDevice",
          "CountWhitelistDevices",
          "NewReleaseCandidateHandler"
        ],
        "imports": [
          "fmt",
          "net/http",
          "strconv",
          "github.com/labstack/echo/v4",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/releasecandidate"
        ],
        "complexity": "medium"
      },
      "handlers/trusted_domain.go": {
        "language": "Go",
        "purpose": "Handles trusted domain operations including retrieval, saving, and deletion of trusted domains.",
        "key_types": [
          "TrustedDomainHandler",
          "trustedDomainHandler",
          "md.TrustedDomain",
          "md.SaveTrustedDomainBatchRequest"
        ],
        "functions": [
          "PublicGetByDomain",
          "PublicGetAll",
          "InternalSave",
          "InternalSaveBatch",
          "InternalGetByDomain",
          "InternalDeleteByDomain",
          "InternalGetList",
          "validateAndNormalizeDomain",
          "normalizeDomain"
        ],
        "imports": [
          "errors",
          "net/http",
          "net/url",
          "regexp",
          "strings",
          "github.com/labstack/echo/v4",
          "gorm.io/gorm",
          "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
          "github.com/axieinfinity/ecosystem-go-common/errors",
          "github.com/axieinfinity/ronin-wallet-manager/models",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/blacklist",
          "github.com/axieinfinity/ronin-wallet-manager/pkg/trusteddomain"
        ],
        "side_effects": [
          "Modifies the state of trusted domains in the database.",
          "May alter the visibility of domains based on blacklist checks."
        ],
        "risks": [
          "Potential exposure of sensitive domain information if not properly validated.",
          "Improper handling of errors may lead to information leakage."
        ],
        "complexity": "medium"
      }
    }
  }
}