{
  "content_hash": "583d971f5957264c3dc29551551d4b7e",
  "timestamp": "2025-09-26T08:53:43.083343+07:00",
  "result": {
    "language": "Go",
    "purpose": "Handles announcements and preferences for a service, providing internal and public API endpoints.",
    "key_types": [
      "AnnouncementHandler",
      "announcementHandler",
      "md.ScheduleNewAnnouncementRequest",
      "md.ScheduleNewSpecialOfferRequest",
      "md.GetAnnouncementByID",
      "md.GetAnnouncementsListRequest",
      "md.InternalGetWalletPreferencesRequest",
      "md.InternalGetWalletPreferenceResponse",
      "md.PublicAnnouncementListItem",
      "md.ListResponse",
      "md.GetCountNewAnnouncementsRequest",
      "md.GetCountNewAnnouncementsResponse"
    ],
    "functions": [
      "InternalScheduleNewAnnouncement",
      "InternalScheduleNewSpecialOffer",
      "InternalGetAnnouncementByID",
      "InternalGetAnnouncementsList",
      "InternalMarkPublished",
      "InternalManualCleanPublishedJobs",
      "InternalDeleteAnnouncement",
      "InternalGetWalletPreferences",
      "PublicGetAnnouncementByID",
      "PublicGetAnnouncementsList",
      "PublicCountNewAnnouncements",
      "PrivateGetPreferences",
      "PrivateUpdatePreferences",
      "PrivateGetDevicePreference",
      "PrivateUpdateDevicePreference",
      "NewAnnouncementHandler"
    ],
    "imports": [
      "errors",
      "net/http",
      "slices",
      "github.com/axieinfinity/ecosystem-go-common/echo/middleware",
      "github.com/axieinfinity/ecosystem-go-common/errors",
      "github.com/labstack/echo/v4",
      "gorm.io/gorm",
      "github.com/axieinfinity/ronin-wallet-manager/models",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/announcement",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/helper",
      "github.com/axieinfinity/ronin-wallet-manager/pkg/preference"
    ],
    "side_effects": [
      "Interacts with external services for scheduling and managing announcements",
      "Modifies preferences in the database"
    ],
    "risks": [
      "Potential for SQL injection if input is not properly sanitized",
      "Exposure of sensitive data through public API endpoints"
    ],
    "complexity": "medium"
  }
}